{"name":"AOP Metrics","tagline":"Measuring Aspect-Oriented Software In Practice","body":"<img height=\"550px\" src=\"https://dl.dropboxusercontent.com/s/grmua5z1gwknbl9/cover.JPG\" >\r\n### Master Thesis: Measuring Aspect-Oriented Software In Practice\r\n[![Analytics](https://ga-beacon.appspot.com/UA-52814996-1/chromeskel_a/readme)](https://github.com/igrigorik/ga-beacon)\r\n\r\n---\r\n\r\n**Abstract**. Aspect-oriented programming (AOP) is a way of modularizing a software system by means of new kind of modules called aspects in software development. To this end AOP helps in alleviating crosscutting concerns of system modules by separating into several aspect modules, thereby aiming to improve separation of concerns. On the other hand, aspects can bring unexpected behaviour to a system while attempting to alter the system’s concerns. They can modify the behaviour of the base system without warning. Following to this, such impact can limit to achieve modular reasoning in an aspect-oriented system properly.\r\n\r\nObtaining the valuable data, we try to get an idea of how difficult it is to achieve modular reasoning. In this thesis, we analyse the existing ten **[AspectJ](http://eclipse.org/aspectj/)** systems by answering six research questions. These six questions were derived from our general question: *\"how AspectJ is used in practice?\"*. In order to answer each one of them, we have implemented\r\na metrics suite including both **[aspect-oriented ](http://en.wikipedia.org/wiki/Aspect-oriented_programming)** and **[object-oriented ](http://en.wikipedia.org/wiki/Object-oriented_programming)** features using [**Ekeko**](https://github.com/cderoove/damp.ekeko). Next to modular reasoning, we also acquire other usefulness about AOP constructs and coupling between classes and aspects. These results can then be used to influence the design of existing or new AOP languages, or to improve existing analysis tools of AOP.\r\n\r\n### Hierarchy of the research questions \r\n---\r\n\r\n1.\tHow large is the system?\r\n\t*\t*Lines of Code* [(LOC)](https://github.com/ozlerhakan/aop-metrics-ekeko/blob/master/Ekeko%20AJFX/src/ekeko_ajfx/AOPMetrics.clj#L156)\r\n\t*\t*Vocabulary Size* [(VS)](https://github.com/ozlerhakan/aop-metrics-ekeko/blob/master/Ekeko%20AJFX/src/ekeko_ajfx/AOPMetrics.clj#L191) \r\n\t*\t*Number of Attributes* [(NOA)](https://github.com/ozlerhakan/aop-metrics-ekeko/blob/master/Ekeko%20AJFX/src/ekeko_ajfx/AOPMetrics.clj#L201) \r\n\t*\t*Number of Methods* [(NOM)](https://github.com/ozlerhakan/aop-metrics-ekeko/blob/master/Ekeko%20AJFX/src/ekeko_ajfx/AOPMetrics.clj#L211)\r\n2.\tHow often are AOP constructs used compared to OOP features?\r\n\t*\t*Number of Intertypes* [(NOI)](https://github.com/ozlerhakan/aop-metrics-ekeko/blob/master/Ekeko%20AJFX/src/ekeko_ajfx/AOPMetrics.clj#L238)\r\n\t*\t*Number of Advice* [(NOAd)](https://github.com/ozlerhakan/aop-metrics-ekeko/blob/master/Ekeko%20AJFX/src/ekeko_ajfx/AOPMetrics.clj#L256)\r\n3.\tWhich AOP constructs are typically used?\r\n\t*\t*Inherited Aspects* [(InA)](https://github.com/ozlerhakan/aop-metrics-ekeko/blob/master/Ekeko%20AJFX/src/ekeko_ajfx/AOPMetrics.clj#L573)\r\n\t*\t*Singleton Aspects* [(SA)](https://github.com/ozlerhakan/aop-metrics-ekeko/blob/master/Ekeko%20AJFX/src/ekeko_ajfx/AOPMetrics.clj#L580)\r\n\t*\t*Non-Singleton Aspects* [(nSA)](https://github.com/ozlerhakan/aop-metrics-ekeko/blob/master/Ekeko%20AJFX/src/ekeko_ajfx/AOPMetrics.clj#L589)\r\n\t*\t*Advice-Advanced Pointcut Dependence* [(AAP)](https://github.com/ozlerhakan/aop-metrics-ekeko/blob/master/Ekeko%20AJFX/src/ekeko_ajfx/AOPMetrics.clj#L557)\r\n\t*\t*Advice-Basic Pointcut Dependence* [(ABP)](https://github.com/ozlerhakan/aop-metrics-ekeko/blob/master/Ekeko%20AJFX/src/ekeko_ajfx/AOPMetrics.clj#L567)\r\n\t*\t*Number of Around Advice* [(NOAr)](https://github.com/ozlerhakan/aop-metrics-ekeko/blob/master/Ekeko%20AJFX/src/ekeko_ajfx/AOPMetrics.clj#L733)\r\n\t*\t*Number of Before/After Advice* [(NOBA)](https://github.com/ozlerhakan/aop-metrics-ekeko/blob/master/Ekeko%20AJFX/src/ekeko_ajfx/AOPMetrics.clj#L752)\r\n\t*\t*Number of After Throwing/Returning Advice* [(NOTR)](https://github.com/ozlerhakan/aop-metrics-ekeko/blob/master/Ekeko%20AJFX/src/ekeko_ajfx/AOPMetrics.clj#L770)\r\n\t*\t*Number of Call* [(NOC)](https://github.com/ozlerhakan/aop-metrics-ekeko/blob/master/Ekeko%20AJFX/src/ekeko_ajfx/AOPMetrics.clj#L893)\r\n\t*\t*Number of Execution* [(NOE)](https://github.com/ozlerhakan/aop-metrics-ekeko/blob/master/Ekeko%20AJFX/src/ekeko_ajfx/AOPMetrics.clj#L900)\r\n\t*\t*Adviceexecution-Advice Dependence* [(AE)](https://github.com/ozlerhakan/aop-metrics-ekeko/blob/master/Ekeko%20AJFX/src/ekeko_ajfx/AOPMetrics.clj#L596)\r\n\t*\t*Number of Wildcards* [(NOW)](https://github.com/ozlerhakan/aop-metrics-ekeko/blob/master/Ekeko%20AJFX/src/ekeko_ajfx/AOPMetrics.clj#L1128)\r\n\t*\t*Number of non-Wildcards* [(NOnW)](https://github.com/ozlerhakan/aop-metrics-ekeko/blob/master/Ekeko%20AJFX/src/ekeko_ajfx/AOPMetrics.clj#L1140)\r\n\t*\t*Argument size of Args-Advice* [(AAd)](https://github.com/ozlerhakan/aop-metrics-ekeko/blob/master/Ekeko%20AJFX/src/ekeko_ajfx/AOPMetrics.clj#L722)\r\n\t*\t*Argument size of Args-Advice-args* [(AAda)](https://github.com/ozlerhakan/aop-metrics-ekeko/blob/master/Ekeko%20AJFX/src/ekeko_ajfx/AOPMetrics.clj#L727)\r\n4.\tHow many types and members of a system are advised by AOP?\r\n\t*\t*Percentage of Advised Classes* [(AdC)](https://github.com/ozlerhakan/aop-metrics-ekeko/blob/master/Ekeko%20AJFX/src/ekeko_ajfx/AOPMetrics.clj#L851)\r\n\t*\t*Percentage of non-Advised Classes* [(nAdC)](https://github.com/ozlerhakan/aop-metrics-ekeko/blob/master/Ekeko%20AJFX/src/ekeko_ajfx/AOPMetrics.clj#L922)\r\n\t*\t*Number of Advised Methods* [(AdM)](https://github.com/ozlerhakan/aop-metrics-ekeko/blob/master/Ekeko%20AJFX/src/ekeko_ajfx/AOPMetrics.clj#L987)\r\n\t*   *Number of non-Advised Methods* [(nAdM)](https://github.com/ozlerhakan/aop-metrics-ekeko/blob/master/Ekeko%20AJFX/src/ekeko_ajfx/AOPMetrics.clj#L993)\r\n\t*\t*Classes and Subclasses* [(CsC)](https://github.com/ozlerhakan/aop-metrics-ekeko/blob/master/Ekeko%20AJFX/src/ekeko_ajfx/AOPMetrics.clj#L1046)\r\n\t*\t*Average of Subclasses of Classes* [(ScC)](https://github.com/ozlerhakan/aop-metrics-ekeko/blob/master/Ekeko%20AJFX/src/ekeko_ajfx/AOPMetrics.clj#L1076)\r\n5.\tIs there a connection between the amount of coupling in an aspect, and how many shadows it advises?\r\n\t*\t*Advice-Join Point Shadow Dependence* [(AJ)](https://github.com/ozlerhakan/aop-metrics-ekeko/blob/master/Ekeko%20AJFX/src/ekeko_ajfx/AOPMetrics.clj#L655)\r\n\t*\t*Number of thisJoinPoint/Static* [(tJPS)](https://github.com/ozlerhakan/aop-metrics-ekeko/blob/master/Ekeko%20AJFX/src/ekeko_ajfx/AOPMetrics.clj#L1154)\r\n\t*\t*Number of Modified Args* [(MoA)](https://github.com/ozlerhakan/aop-metrics-ekeko/blob/master/Ekeko%20AJFX/src/ekeko_ajfx/AOPMetrics.clj#L1225)\r\n\t*\t*Number of Accessed Args* [(AcA)](https://github.com/ozlerhakan/aop-metrics-ekeko/blob/master/Ekeko%20AJFX/src/ekeko_ajfx/AOPMetrics.clj#L1262)\r\n\t*\t*Around Advice - non-Proceed Call Dependence* [(AnP)](https://github.com/ozlerhakan/aop-metrics-ekeko/blob/master/Ekeko%20AJFX/src/ekeko_ajfx/AOPMetrics.clj#L796)\r\n6.\tHow many dependencies are there between classes and aspects?\t\r\n\t*\t*Attribute-Class Dependence* [(AtC)](https://github.com/ozlerhakan/aop-metrics-ekeko/blob/master/Ekeko%20AJFX/src/ekeko_ajfx/AOPMetrics.clj#L366)\r\n\t*\t*Advice-Class Dependence* [(AC)](https://github.com/ozlerhakan/aop-metrics-ekeko/blob/master/Ekeko%20AJFX/src/ekeko_ajfx/AOPMetrics.clj#L380)\r\n\t*\t*Intertype-Class Dependence* [(IC)](https://github.com/ozlerhakan/aop-metrics-ekeko/blob/master/Ekeko%20AJFX/src/ekeko_ajfx/AOPMetrics.clj#L414)\r\n\t*\t*Method-Class Dependence* [(MC)](https://github.com/ozlerhakan/aop-metrics-ekeko/blob/master/Ekeko%20AJFX/src/ekeko_ajfx/AOPMetrics.clj#L448)\r\n\t*\t*Pointcut-Class Dependence* [(PC)](https://github.com/ozlerhakan/aop-metrics-ekeko/blob/master/Ekeko%20AJFX/src/ekeko_ajfx/AOPMetrics.clj#L481)\r\n\t*\t*Advice-Method Dependence* [(AM)](https://github.com/ozlerhakan/aop-metrics-ekeko/blob/master/Ekeko%20AJFX/src/ekeko_ajfx/AOPMetrics.clj#L332) \r\n\t*\t*IntertypeMethod-Method Dependence* [(IM)](https://github.com/ozlerhakan/aop-metrics-ekeko/blob/master/Ekeko%20AJFX/src/ekeko_ajfx/AOPMetrics.clj#L340)\r\n\t*\t*Method-Method Dependence* [(MM)](https://github.com/ozlerhakan/aop-metrics-ekeko/blob/master/Ekeko%20AJFX/src/ekeko_ajfx/AOPMetrics.clj#L356)\r\n\t*\t*Pointcut-Method Dependence* [(PM)](https://github.com/ozlerhakan/aop-metrics-ekeko/blob/master/Ekeko%20AJFX/src/ekeko_ajfx/AOPMetrics.clj#L496) \r\n\r\n\r\n### Have a look at an example\r\n---\r\nOne of the questions we examine is: how many aspects extend to an abstract aspect in a given aspect-oriented project?\r\n\r\nThe Metric representation of the question is: the number of inherited aspects in a given aspect-oriented project.\r\n\r\n```Clojure\r\n (defn NOInheritedAspects [?aspectname ?abstractname]\r\n         (l/fresh [?aspect ?source ?super]\r\n                   (NOAspects ?aspect ?source)\r\n                   (w/aspect-declaredsuper ?aspect ?super)\r\n                   (equals ?aspectname (str \"Aspect {\"(.getSimpleName ?aspect)\"}\"))\r\n                   (equals ?abstractname (str \"From Abstract Aspect -> \"(.getSimpleName ?super)))\r\n                   (succeeds (.isAbstract ?super))))\r\n```\r\n### Selected aspect-oriented systems\r\n---\r\n\r\n1. [HealthWatcher](http://www.kevinjhoffman.com/tosem2012/)\r\n2. HyperCast\r\n3. [AJHotDraw](http://ajhotdraw.sourceforge.net/)\r\n4. [AJHSQLDB](http://sourceforge.net/projects/ajhsqldb/)\r\n5. [Contract4J5](https://github.com/deanwampler/Contract4J5)\r\n6. [MobileMedia](http://sourceforge.net/projects/mobilemedia/)\r\n7. [iBatis](sourceforge.net/projects/ibatislancaster/)\r\n8. [Telestrada](http://www.kevinjhoffman.com/tosem2012/)\r\n9. SpaceWar\r\n\t* Comes bundled with the [AJDT](http://eclipse.org/ajdt/)\r\n10. [TetrisAJ](http://www.guzzzt.com/coding/aspecttetris.shtml)\r\n\r\n### Some charts mentioned in this thesis\r\n---\r\nAll the related charts are available in [Thesis Text/diagrams](https://github.com/ozlerhakan/aop-metrics/tree/master/Thesis%20Text/diagrams).\r\n\r\n<img height=\"240px\" src=\"https://dl.dropboxusercontent.com/s/ikz4irmck0gz9an/index4.png\" title=\"The Percentage of Advised Classes against non-Advised Classes\" > <img height=\"240px\" src=\"https://dl.dropboxusercontent.com/s/69l8fndbu5abfcf/index5.png\" title=\"AAd vs AAda\" >\r\n\r\n <img height=\"220px\" src=\"https://dl.dropboxusercontent.com/s/9o65wcdnklbvkc9/index3.png\" title=\"Advice-Advanced Pointcut Dependency versus Advice-Basic Pointcut Dependency per System\" > <img height=\"220px\" src=\"https://dl.dropboxusercontent.com/s/yzh7kv860zi5dyi/index2.png\" title=\"The Average of Advice-Join Point Shadow Dependency per System\" >\r\n### How the metrics work\r\n---\r\n\r\nFirst of all, make sure that you have all the dependencies about the *Ekeko plug-in* in your [Eclipse Luna 4.4 IDE](https://www.eclipse.org/downloads/), if not, you first need to download the dependencies:\r\n\r\n  * AST View [i.e. org.eclipse.jdt.astview](http://www.eclipse.org/jdt/ui/astview/index.php)\r\n  * [Counterclockwise](http://doc.ccw-ide.org/documentation.html#install-as-plugin)\r\n\r\nDownloading the dependencies, you are now ready to install the prebuilt *Ekeko* plug-in:\r\n\r\n  * Go to: ```Help > Install New Software...``` in your Eclipse IDE.\r\n  * Copy and paste this url: http://soft.vub.ac.be/~cderoove/eclipse/ in the Work with text field.\r\n  * Hit Enter.\r\n  * Select all plug-ins including [Ekeko](https://github.com/cderoove/damp.ekeko) and [GASR](https://github.com/cderoove/damp.ekeko.aspectj) in Ekeko-based program Analysis (*required*), the rest are (*optional*) and install all of them.\r\n  * After installing both Ekeko and the Ekeko's AspectJ extension, you are ready to downdload the metrics.\r\n  * Import the project (i.e. the aopmetrics project) in your Eclipse workspace. Eclipse Luna will automatically detect this project as a Clojure project.\r\n  * Select an AspectJ project that you want to analyse then, right-click on the project, apply these steps: ```Configure > Include in Ekeko Queries```\r\n  * **The metrics also need soot analyses in order to run properly**. To do that, we need to configure the selected AspectJ project once as follows:\r\n      *  Right-click on the project : ```Properties > Ekeko properties```.\r\n      *  Click the Select button and now choose the class that contains the main() method of the AspectJ project. (e.g. you can find an example of a main() method in our AJTestMetrics project ([MainTST](https://github.com/ozlerhakan/aop-metrics/blob/master/AJTestMetrics/src/ua/thesis/test/MainTST.java)).\r\n\t\t* If your AspectJ project does not have a main() method, just **create** a new one to set it as an execution point of soot analysis.\r\n      *  Write the following line into the \"Soot arguments:\" one-line text box: ```-no-bodies-for-excluded -src-prec c -f jimple -keep-line-number -app -w -p cg.cha```\r\n      * Click OK\r\n      * Finally, ```right-click the project > Configure > Enable Ekeko Soot Analyses```.\r\n\r\n  * Activate an Ekeko-hosted REPL by doing ```Ekeko > Start nRepl``` from the main Eclipse menu. A dialog shows the port on which the nRepl server listens (e.g. ```nrepl://localhost:51721```)\r\n  * Connect to the Ekeko-hosted REPL: Go to: ```Window > Connect to REPL``` to connect to this port (i.e. ```nrepl://localhost:51721```). A Counterclockwise REPL view now opens.\r\n  * There are 2 steps to run the metrics:\r\n \t* First,  Open the ```aopmetrics/metrics.clj``` file and right-click somewhere on the file and choose ```Clojure > Load file in REPL ```. After obtaining ```#'aopmetrics.metrics/AcA``` in the REPL, follow the second step.\r\n  \t* Second, Open the ```aopmetrics/core.clj``` file and right-click somewhere on the file and choose ```Clojure > Load file in REPL ```.\r\n  \t\t* You will see ```nil``` in the REPL which means that everything goes correctly and the metric framework has likewise been loaded in the REPL.\r\n  \t\t* After disabling the comment block, you can now run the metrics. For example, if we look at ```(metrics/VSize)```, the alias name of our ```AOPMetrics``` is ```metrics``` that helps in reaching the implemented metrics in a short way rather than typing the totally qualified name (i.e. ```AOPMetrics```). ```metrics/Vsize``` simply retrieves the vocabulary size of the project.\r\n\r\n\r\n\r\n:pushpin:**Note:** The AcA and MoA metrics need different soot arguments to obtain the exact data. Thus, you need to change the current arguments with the following one: ```-no-bodies-for-excluded -src-prec c -f jimple -keep-line-number -app -w -p jb use-original-names:true -p cg.cha``` and run again ```Ekeko Soot Analyses```.\r\n\r\n\r\n>:exclamation:**One Potential Issue**: There was an encountered issue about soot analysis. If you get the same problem called ```RuntimeException : tried to get nonexistent method```, while attempting to run the metrics especially for the AM, IM, and MM metrics.  You can find more information on it from https://github.com/ozlerhakan/aop-metrics/issues/1 \r\n\r\n### License \r\n\r\nCopyright © 2014 Hakan Özler.\r\n\r\n","google":"UA-52820059-1","note":"Don't delete this file! It's used internally to help with page regeneration."}